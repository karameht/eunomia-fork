#!/usr/bin/env sh

echo "ğŸ” EUNOMIA Quality Gate - Pre-Commit Checks"
echo "============================================="

# Run lint-staged for changed files
echo "ğŸ“‹ Running lint-staged..."
yarn lint-staged

# Check lint-staged exit code
if [ $? -ne 0 ]; then
  echo "âŒ lint-staged failed! Fix the issues above."
  exit 1
fi

# Additional TypeScript check
echo "ğŸ”§ Running TypeScript check..."
yarn tsc --noEmit

if [ $? -ne 0 ]; then
  echo "âŒ TypeScript errors found! Fix them before committing."
  exit 1
fi

# Environment file check
echo "ğŸŒ Checking environment files..."
if [ ! -f ".env.local" ] && [ ! -f ".env" ]; then
  echo "âš ï¸  Warning: No .env file found. Copy .env.example to .env.local"
fi

echo "âœ… All pre-commit checks passed!"
echo "============================================="
